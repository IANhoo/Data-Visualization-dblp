var myWords_all = [{"word": "System", "size": 1.0, "key": 0}, {"word": "Algorithm", "size": 0.465149026050223, "key": 1}, {"word": "Network", "size": 0.4169078724347441, "key": 2}, {"word": "Data", "size": 0.38334767529792174, "key": 3}, {"word": "Analysis", "size": 0.3041018018722783, "key": 4}, {"word": "Design", "size": 0.3008161881665754, "key": 5}, {"word": "Database", "size": 0.2977913374533886, "key": 6}, {"word": "Parallel", "size": 0.29270645909932463, "key": 7}, {"word": "Time", "size": 0.2747138126157136, "key": 8}, {"word": "Language", "size": 0.26159743409215364, "key": 9}, {"word": "Distributed", "size": 0.2581553625909411, "key": 10}, {"word": "Information", "size": 0.2568515476283606, "key": 11}, {"word": "Logic", "size": 0.24522151816214244, "key": 12}, {"word": "Software", "size": 0.2266812693942476, "key": 13}, {"word": "Performance", "size": 0.2205794153693708, "key": 14}, {"word": "Computer", "size": 0.196015541474354, "key": 15}, {"word": "Programming", "size": 0.1846462750006519, "key": 16}, {"word": "Learning", "size": 0.17815327648700094, "key": 17}, {"word": "Graph", "size": 0.17400714490599495, "key": 18}, {"word": "Image", "size": 0.16769668048710526, "key": 19}, {"word": "Knowledge", "size": 0.1662624840282667, "key": 20}, {"word": "Control", "size": 0.16321155701582832, "key": 21}, {"word": "Environment", "size": 0.16274218362929932, "key": 22}, {"word": "Architecture", "size": 0.1626639547315445, "key": 23}, {"word": "Applications", "size": 0.15922188323033196, "key": 24}, {"word": "Management", "size": 0.1590393491355707, "key": 25}, {"word": "Efficient", "size": 0.15533651464184206, "key": 26}, {"word": "Tree", "size": 0.14493207124044954, "key": 27}, {"word": "Dynamic", "size": 0.1445148504524238, "key": 28}, {"word": "Oriented", "size": 0.14057732926543065, "key": 29}, {"word": "Models", "size": 0.13418863594878616, "key": 30}, {"word": "Programs", "size": 0.13314558397872173, "key": 31}, {"word": "Structure", "size": 0.13236329500117344, "key": 32}, {"word": "Simulation", "size": 0.12936452058723827, "key": 33}, {"word": "Real", "size": 0.12454040522569038, "key": 34}, {"word": "Technique", "size": 0.12297582727059375, "key": 35}, {"word": "Implementation", "size": 0.12266291167957445, "key": 36}, {"word": "Communication", "size": 0.12250645388406475, "key": 37}, {"word": "Abstract", "size": 0.12221961459229705, "key": 38}, {"word": "Evaluation", "size": 0.12219353829304545, "key": 39}, {"word": "Problems", "size": 0.12042034994393595, "key": 40}, {"word": "Semantic", "size": 0.119012229784349, "key": 41}, {"word": "Agent", "size": 0.11815171190904587, "key": 42}, {"word": "Computing", "size": 0.11809955931054265, "key": 43}, {"word": "Web", "size": 0.117004354741975, "key": 44}, {"word": "Machine", "size": 0.11551800568463325, "key": 45}, {"word": "Multi", "size": 0.11533547158987195, "key": 46}, {"word": "High", "size": 0.11270176536545935, "key": 47}, {"word": "Complexity", "size": 0.11270176536545935, "key": 48}, {"word": "Function", "size": 0.1118412474901562, "key": 49}, {"word": "Set", "size": 0.11168478969464654, "key": 50}, {"word": "Linear", "size": 0.11095465331560143, "key": 51}, {"word": "Constraint", "size": 0.11077211922084018, "key": 52}, {"word": "Modeling", "size": 0.10975514355002737, "key": 53}, {"word": "Case", "size": 0.1080341077994211, "key": 54}, {"word": "Protocol", "size": 0.10639130094656966, "key": 55}, {"word": "Theory", "size": 0.10553078307126652, "key": 56}, {"word": "Tool", "size": 0.10414873921093118, "key": 57}, {"word": "Memory", "size": 0.10349683172964093, "key": 58}, {"word": "Processing", "size": 0.10313176354011838, "key": 59}, {"word": "Development", "size": 0.10284492424835068, "key": 60}, {"word": "Specification", "size": 0.1018801011760411, "key": 61}, {"word": "Service", "size": 0.10057628621346057, "key": 62}, {"word": "Optimal", "size": 0.10026337062244127, "key": 63}, {"word": "Support", "size": 0.09739497770476414, "key": 64}, {"word": "Framework", "size": 0.09682129912122872, "key": 65}, {"word": "Retrieval", "size": 0.09588255234817077, "key": 66}, {"word": "Study", "size": 0.09486557667735797, "key": 67}, {"word": "User", "size": 0.09298808313124203, "key": 68}, {"word": "Computation", "size": 0.09131919997913897, "key": 69}, {"word": "Representation", "size": 0.09121489478213253, "key": 70}, {"word": "Scheduling", "size": 0.09095413178961642, "key": 71}, {"word": "Multiple", "size": 0.09051083470233903, "key": 72}, {"word": "Space", "size": 0.0898850035203004, "key": 73}, {"word": "Toward", "size": 0.08949385903152625, "key": 74}, {"word": "Process", "size": 0.08938955383451981, "key": 75}, {"word": "Reasoning", "size": 0.08881587525098437, "key": 76}, {"word": "und", "size": 0.08834650186445539, "key": 77}, {"word": "Two", "size": 0.0875902891861587, "key": 78}, {"word": "Scheme", "size": 0.0865472372160943, "key": 79}, {"word": "Generation", "size": 0.08566064304153954, "key": 80}, {"word": "Interface", "size": 0.0855563378445331, "key": 81}, {"word": "Level", "size": 0.08521734595426217, "key": 82}, {"word": "Adaptive", "size": 0.08506088815875251, "key": 83}, {"word": "Engineering", "size": 0.08459151477222353, "key": 84}, {"word": "Search", "size": 0.083757073196172, "key": 85}, {"word": "Fault", "size": 0.08354846280215912, "key": 86}, {"word": "Type", "size": 0.08315731831338496, "key": 87}, {"word": "Code", "size": 0.08214034264257218, "key": 88}, {"word": "Multimedia", "size": 0.08099298547550132, "key": 89}, {"word": "Large", "size": 0.08062791728597878, "key": 90}, {"word": "Digital", "size": 0.08049753578972073, "key": 91}, {"word": "Optimization", "size": 0.0804453831912175, "key": 92}, {"word": "Methods", "size": 0.07961094161516598, "key": 93}, {"word": "Rule", "size": 0.07854181334584996, "key": 94}, {"word": "Neural", "size": 0.07765521917129521, "key": 95}, {"word": "Fast", "size": 0.07760306657279199, "key": 96}, {"word": "Mobile", "size": 0.07695115909150173, "key": 97}, {"word": "Automatic", "size": 0.07692508279225012, "key": 98}, {"word": "der", "size": 0.07684685389449529, "key": 99}, {"word": "Query", "size": 0.07642963310646952, "key": 100}, {"word": "Virtual", "size": 0.07616887011395343, "key": 101}, {"word": "Extended", "size": 0.0760906412161986, "key": 102}, {"word": "Order", "size": 0.07335262979477952, "key": 103}, {"word": "Formal", "size": 0.07293540900675376, "key": 104}, {"word": "Test", "size": 0.07283110380974732, "key": 105}, {"word": "Access", "size": 0.07246603562022477, "key": 106}, {"word": "Video", "size": 0.07170982294192807, "key": 107}, {"word": "Circuit", "size": 0.07160551774492165, "key": 108}, {"word": "Pattern", "size": 0.0715012125479152, "key": 109}, {"word": "Non", "size": 0.07087538136587655, "key": 110}, {"word": "Recognition", "size": 0.07079715246812172, "key": 111}, {"word": "Decision", "size": 0.07017132128608307, "key": 112}, {"word": "von", "size": 0.06905004041826382, "key": 113}, {"word": "Finite", "size": 0.0681895225429607, "key": 114}, {"word": "Sequence", "size": 0.06790268325119299, "key": 115}, {"word": "Temporal", "size": 0.0671464705728963, "key": 116}, {"word": "Routing", "size": 0.06659886828861249, "key": 117}, {"word": "Bound", "size": 0.06581657931106417, "key": 118}, {"word": "Detection", "size": 0.06550366372004485, "key": 119}, {"word": "Verification", "size": 0.06506036663276747, "key": 120}, {"word": "Processor", "size": 0.0648517562387546, "key": 121}, {"word": "Testing", "size": 0.06477352734099978, "key": 122}, {"word": "Objects", "size": 0.06461706954549011, "key": 123}, {"word": "Interactive", "size": 0.06399123836345147, "key": 124}, {"word": "Use", "size": 0.06391300946569663, "key": 125}, {"word": "Line", "size": 0.062817804897129, "key": 126}, {"word": "Base", "size": 0.062478813006858064, "key": 127}, {"word": "Flow", "size": 0.0620355159195807, "key": 128}, {"word": "Issue", "size": 0.061722600328561375, "key": 129}, {"word": "Proceeding", "size": 0.06164437143080654, "key": 130}, {"word": "Planning", "size": 0.06130537954053561, "key": 131}, {"word": "Automata", "size": 0.06049701426373569, "key": 132}, {"word": "State", "size": 0.06041878536598086, "key": 133}, {"word": "Technology", "size": 0.06000156457795509, "key": 134}, {"word": "Net", "size": 0.058775978513129414, "key": 135}, {"word": "Path", "size": 0.05812407103183916, "key": 136}, {"word": "Relational", "size": 0.057420010952045686, "key": 137}, {"word": "Document", "size": 0.057289629455787625, "key": 138}, {"word": "Fuzzy", "size": 0.0564291115804845, "key": 139}, {"word": "Power", "size": 0.05629873008422644, "key": 140}, {"word": "Free", "size": 0.0561683485879684, "key": 141}, {"word": "Genetic", "size": 0.0561683485879684, "key": 142}, {"word": "Functional", "size": 0.055646822602936186, "key": 143}, {"word": "Domain", "size": 0.055646822602936186, "key": 144}, {"word": "Integration", "size": 0.055177449216407215, "key": 145}, {"word": "Matching", "size": 0.05504706772014915, "key": 146}, {"word": "Introduction", "size": 0.05502099142089754, "key": 147}, {"word": "International", "size": 0.05483845732613628, "key": 148}, {"word": "Internet", "size": 0.054290855041852465, "key": 149}, {"word": "Solution", "size": 0.054056168348587966, "key": 150}, {"word": "Modelling", "size": 0.05400401575008475, "key": 151}, {"word": "Self", "size": 0.0538736342538267, "key": 152}, {"word": "Proof", "size": 0.053221726772536435, "key": 153}, {"word": "Concurrent", "size": 0.05288273488226551, "key": 154}, {"word": "Context", "size": 0.05267412448825263, "key": 155}, {"word": "f\u00fcr", "size": 0.052282979999478466, "key": 156}, {"word": "Comparison", "size": 0.05207436960546559, "key": 157}, {"word": "Polynomial", "size": 0.05176145401444627, "key": 158}, {"word": "Synthesi", "size": 0.05139638582492373, "key": 159}, {"word": "Security", "size": 0.05097916503689797, "key": 160}, {"word": "Approximation", "size": 0.050900936139143135, "key": 161}, {"word": "Task", "size": 0.050900936139143135, "key": 162}, {"word": "Point", "size": 0.0508227072413883, "key": 163}, {"word": "View", "size": 0.05071840204438186, "key": 164}, {"word": "Group", "size": 0.05069232574513025, "key": 165}, {"word": "Intelligent", "size": 0.05053586794962059, "key": 166}, {"word": "Research", "size": 0.05014472346084644, "key": 167}, {"word": "Grammar", "size": 0.0500664945630916, "key": 168}, {"word": "Visual", "size": 0.05001434196458839, "key": 169}, {"word": "Multiprocessor", "size": 0.04988396046833034, "key": 170}, {"word": "Error", "size": 0.049779655271323886, "key": 171}, {"word": "Feature", "size": 0.049727502672820674, "key": 172}, {"word": "Concept", "size": 0.049518892278807784, "key": 173}, {"word": "Text", "size": 0.04941458708180135, "key": 174}, {"word": "Classification", "size": 0.049075595191530416, "key": 175}, {"word": "Integrated", "size": 0.04891913739602076, "key": 176}, {"word": "Random", "size": 0.04858014550574982, "key": 177}, {"word": "Local", "size": 0.04839761141098856, "key": 178}, {"word": "Construction", "size": 0.04805861952071762, "key": 179}, {"word": "Algebraic", "size": 0.047823932827453126, "key": 180}, {"word": "Conference", "size": 0.047771780228949914, "key": 181}, {"word": "General", "size": 0.04766747503194347, "key": 182}, {"word": "ATM", "size": 0.04756316983493703, "key": 183}, {"word": "Computational", "size": 0.0474849409371822, "key": 184}, {"word": "Algebra", "size": 0.04732848314167253, "key": 185}, {"word": "3D", "size": 0.04678088085738872, "key": 186}, {"word": "Simple", "size": 0.046702651959633884, "key": 187}, {"word": "Queries", "size": 0.046702651959633884, "key": 188}, {"word": "Dimensional", "size": 0.046650499361130665, "key": 189}, {"word": "Processe", "size": 0.046650499361130665, "key": 190}, {"word": "Solving", "size": 0.04657227046337584, "key": 191}, {"word": "Number", "size": 0.0464679652663694, "key": 192}, {"word": "Result", "size": 0.04641581266786618, "key": 193}, {"word": "Shared", "size": 0.046259354872356516, "key": 194}, {"word": "Array", "size": 0.04602466817909202, "key": 195}, {"word": "Estimation", "size": 0.04573782888732431, "key": 196}, {"word": "Server", "size": 0.045659599989569484, "key": 197}, {"word": "Resource", "size": 0.04552921849331143, "key": 198}, {"word": "Transformation", "size": 0.0454509895955566, "key": 199}]
  
  // color list for word cloud
  myWords = myWords_all;
  var myColor = d3.scaleSequential().domain([0,1])
  .interpolator(d3.interpolateViridis);
  // var myColor = d3.scaleOrdinal()
  //   .domain(["System", "Algorithm", "Data", "Database"])
  //   .range(d3.schemeSet2);
  // var myColor = d3.scaleOrdinal().domain(["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L"])
  // .range(d3.schemeSet3);

  // set the dimensions and margins of the graph
  var margin = {top: 10, right: 10, bottom: 10, left: 10},
      width = 450 - margin.left - margin.right,
      height = 450 - margin.top - margin.bottom;
  
  // append the svg object to the body of the page
  var svg = d3.select("#wordCloud").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");
  
  // Constructs a new cloud layout instance. It run an algorithm to find the position of words that suits your requirements
  // Wordcloud features that are different from one word to the other must be here
  var layout = d3.layout.cloud()
    .size([width, height])
    .words(myWords.map(function(d) { return {text: d.word, size:d.size * 100}; }))
    .padding(5)        //space between words
    .rotate(function() { return ~~(Math.random() * 2) * 90; })
    .fontSize(function(d) { return d.size; })      // font size of words
    .on("end", draw);
  layout.start();
  
  // This function takes the output of 'layout' above and draw the words
  // Wordcloud features that are THE SAME from one word to the other can be here
  function draw(words) {
    var a = myColor(Math.random(1,200));
    var b = function(d){return myColor(d.key);};
    console.log( a );

    svg
      .append("g")
        .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
        .selectAll("text")
          .data(words)
        .enter().append("text")
          .style("font-size", function(d) { return d.size; })
          // .style("fill", function(d){return myColor(d.key); })
          // .style("fill", function(d){return myColor(10) })
          .style("fill", b)
          // .style("fill", 111)
          .attr("text-anchor", "middle")
          .style("font-family", "Impact")
          .attr("transform", function(d) {
            return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
          })
          .text(function(d) { return d.text; });
          
          // debug for making each word's color different
          
          
  }